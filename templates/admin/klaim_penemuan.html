<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Penemuan - Klaim Barang</title>
  <link rel="stylesheet" href="{{ url_for('admin_bp.static', filename='css/klaim_penemuan.css') }}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body>
  <div class="sidebar">
    <div>
      <div class="logo-wrapper">
        <img src="{{ url_for('admin_bp.static', filename='image/rectangle.png') }}" class="rectangle-bg">
        <img src="{{ url_for('admin_bp.static', filename='image/logo.png') }}" class="logo-front">
      </div>

      <nav>
        <a href="{{ url_for('admin_bp.beranda_admin') }}">
          <i class="bi bi-speedometer2"></i> Beranda
        </a>
        <a href="{{ url_for('admin_bp.daftar_kehilangan') }}">
          <i class="bi bi-question-circle"></i> Kehilangan
        </a>
        <a href="#" class="active">
          <i class="bi bi-archive"></i> Penemuan
        </a>

        <div class="submenu">
          <a href="{{ url_for('admin_bp.daftar_penemuan') }}">
            <i class="bi bi-list-ul"></i> Daftar Barang
          </a>
          <a href="{{ url_for('admin_bp.tambah_penemuan') }}">
            <i class="bi bi-plus-circle"></i> Tambah
          </a>
            <a href="{{ url_for('admin_bp.daftar_klaim_penemuan') }}" class="active">
            <i class="bi bi-hand-thumbs-up"></i> Klaim Barang
          </a>
        </div>

        <a href="{{ url_for('admin_bp.arsip') }}">
          <i class="bi bi-folder"></i> Arsip
        </a>
        <a href="{{ url_for('admin_bp.pengaturan') }}">
          <i class="bi bi-gear"></i> Pengaturan
        </a>
      </nav>
    </div>

    <a href="{{ url_for('admin_bp.logout_admin') }}" class="logout">
      <i class="bi bi-box-arrow-right"></i> Logout
    </a>
  </div>

  <div class="header">
    <div class="logo-wrapper">
      <img src="{{ url_for('admin_bp.static', filename='image/rectangle2.png') }}" class="rectangle-bg">
      <img src="{{ url_for('admin_bp.static', filename='image/image5.png') }}" class="logo-front">
    </div>

    <h2>Penemuan - Klaim Barang</h2>

    <div class="profile-icon"
          onclick="window.location.href='{{ url_for('admin_bp.pengaturan') }}'"
          style="cursor:pointer;">
          {% if global_admin and global_admin.photo %}
            <img src="{{ url_for('admin_bp.static', filename='upload/' ~ global_admin.photo) }}"
                class="profile-header-img">
          {% else %}
            <i class="bi bi-person-circle"></i>
          {% endif %}
      </div>
  </div>

  <div class="content">
  <div class="action-row">
    <div class="surat-actions">
      <button class="btn-icon"
        title="Surat Kuasa Ambil Sendiri"
        onclick="openSurat('{{ url_for('admin_bp.static', filename='upload/surat_kuasa_ambil_sendiri.pdf') }}')">
        <i class="bi bi-person-check"></i>
      </button>

      <button class="btn-icon"
        title="Surat Kuasa Diwakilkan"
        onclick="openSurat('{{ url_for('admin_bp.static', filename='upload/surat_kuasa_diwakilkan.pdf') }}')">
        <i class="bi bi-people-fill"></i>
      </button>
    </div>

    <div class="export-wrapper">
      <button id="btnExportPdf" class="btn btn-danger">
        <i class="bi bi-file-earmark-pdf"></i> Export PDF
      </button>

      <button id="btnExportExcel" class="btn btn-success">
        <i class="bi bi-file-earmark-excel"></i> Export Excel
      </button>
    </div>
  </div>

    <div class="mb-3">
      <div class="search-filter-wrapper">
        <div class="search-box">
          <input type="text" id="searchInput" placeholder="Cari laporan...">
        </div>
        <div class="filter-box">
          <select id="filterBulan" class="form-select">
          </select>
        </div>
      </div>
    </div>

    <div class="table-container">
    <table id="dataTable">
      <thead>
        <tr>
          <th>Kode</th>
          <th>Nama Barang</th>
          <th>Nama Pengklaim</th>
          <th>Status</th>
          <th>Aksi</th>
        </tr>
      </thead>

      <tbody>
        {% for item in data_klaim %}
        <tr data-bulan="{{ item['tanggal_lapor'][:7] }}">
          <td>{{ item.kode_klaim }}</td>
          <td>{{ item.nama_barang }}</td>
          <td>{{ item.nama_pelapor }}</td>
          <td>
          <select class="status-select" data-kode="{{ item.kode_klaim }}">
            <option value="Pending" {% if item.status == 'Pending' %}selected{% endif %}>Pending</option>
            <option value="Verifikasi" {% if item.status == 'Verifikasi' %}selected{% endif %}>Verifikasi</option>
            <option value="Ditolak" {% if item.status == 'Ditolak' %}selected{% endif %}>Ditolak</option>
            <option value="Siap Diambil" {% if item.status == 'Siap Diambil' %}selected{% endif %}>Siap Diambil</option>
            <option value="Selesai" {% if item.status == 'Selesai' %}selected{% endif %}>Selesai</option>
          </select>
          </td>
          <td class="aksi">
            <a href="{{ url_for('admin_bp.detail_klaim_penemuan', kode_klaim=item.kode_klaim) }}" class="btn-detail">
              <i class="bi bi-eye"></i>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="{{ url_for('admin_bp.static', filename='js/klaim_penemuan.js') }}"></script>
  <script src="{{ url_for('admin_bp.static', filename='js/logout.js') }}"></script>

</body>
</html>
