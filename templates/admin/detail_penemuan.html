<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Penemuan - Detail Laporan Barang</title>

  <!-- CSS Sama Seperti Kehilangan -->
  <link rel="stylesheet" href="{{ url_for('admin_bp.static', filename='css/beranda.css') }}">
  <link rel="stylesheet" href="{{ url_for('admin_bp.static', filename='css/daftar_penemuan.css') }}">
  <link rel="stylesheet" href="{{ url_for('admin_bp.static', filename='css/detail_kehilangan.css') }}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>

<div class="sidebar">
  <div>
    <div class="logo-wrapper">
      <img src="{{ url_for('admin_bp.static', filename='image/rectangle.png')}}" class="rectangle-bg">
      <img src="{{ url_for('admin_bp.static', filename='image/logo.png')}}" class="logo-front">
    </div>

    <nav>
      <a href="{{ url_for('admin_bp.beranda_admin') }}"><i class="bi bi-speedometer2"></i> Beranda</a>
      <a href="{{ url_for('admin_bp.daftar_kehilangan') }}"><i class="bi bi-question-circle"></i> Kehilangan</a>
      <a href="{{ url_for('admin_bp.daftar_penemuan') }}" class="active"><i class="bi bi-archive"></i> Penemuan</a>
      <div class="submenu">
        <a href="{{ url_for('admin_bp.daftar_penemuan') }}" class="active"><i class="bi bi-list-ul"></i> Daftar Barang</a>
        <a href="{{ url_for('admin_bp.tambah_penemuan') }}"><i class="bi bi-plus-circle"></i> Tambah</a>
        <a href="{{ url_for('admin_bp.daftar_klaim_penemuan') }}"><i class="bi bi-hand-thumbs-up"></i> Klaim Barang</a>
      </div>
      <a href="{{ url_for('admin_bp.arsip') }}"><i class="bi bi-folder"></i> Arsip</a>
      <a href="{{ url_for('admin_bp.pengaturan') }}"><i class="bi bi-gear"></i> Pengaturan</a>
    </nav>
  </div>

  <a href="{{ url_for('admin_bp.logout_admin') }}" class="logout">
    <i class="bi bi-box-arrow-right"></i> Logout
  </a>
</div>

<!-- CONTENT -->
<div class="content">
  <div class="header">
    <div class="logo-wrapper">
      <img src="{{ url_for('admin_bp.static', filename='image/rectangle2.png')}}" class="rectangle-bg">
      <img src="{{ url_for('admin_bp.static', filename='image/image5.png')}}" class="logo-front">
    </div>
    <h2>Detail Laporan Penemuan</h2>
    <div class="profile-icon">
      <i class="bi bi-person-circle"></i>
    </div>
  </div>

  <div class="detail-container">

    <!-- LEFT -->
    <div class="left-panel">
      <img id="fotoBarang" class="foto-barang" 
        src="{{ url_for('static', filename='uploads/' ~ (laporan.gambar_barang if laporan.gambar_barang else 'placeholder.png')) }}"
        alt="Foto Barang">
      <div id="kodeLaporan" class="kode-laporan">{{ laporan.kode_barang }}</div>
    </div>

    <!-- RIGHT -->
    <div class="right-panel">

      <!-- DATA PELAPOR -->
      <div class="data-section">
        <h3>Data Pelapor</h3>
        <div class="data-row"><span>Nama :</span><strong>{{ laporan.nama_pelapor }}</strong></div>
        <div class="data-row"><span>No. Telp :</span><strong>{{ laporan.no_telp }}</strong></div>
        <div class="data-row"><span>Email :</span><strong>{{ laporan.email }}</strong></div>
      </div>

      <!-- DATA BARANG -->
    <div class="data-section">
      <h3>Data Barang</h3>
      <div class="data-row"><span>Nama Barang :</span><strong>{{ laporan.nama_barang }}</strong></div>
      <div class="data-row"><span>Kategori :</span><strong>{{ laporan.kategori }}</strong></div>
      <div class="data-row"><span>Jenis Barang :</span><strong>{{ laporan.jenis_barang }}</strong></div>   <!-- BARU -->
      <div class="data-row"><span>Jenis Laporan :</span><strong>Penemuan</strong></div>
      <div class="data-row"><span>Lokasi :</span><strong>{{ laporan.lokasi }}</strong></div>
      <div class="data-row"><span>Deskripsi :</span><strong>{{ laporan.deskripsi }}</strong></div>
    </div>

      <!-- WAKTU & STATUS -->
      <div class="data-section">
        <h3>Waktu & Status</h3>
        <div class="data-row"><span>Tanggal Penemuan :</span><strong>{{ laporan.tanggal_lapor }}</strong></div>
        <div class="data-row"><span>Update Terakhir :</span><strong id="updateTerakhir">{{ laporan.update_terakhir.strftime('%Y-%m-%d %H:%M') if laporan.update_terakhir else '-' }}</strong></div>

        <div class="data-row">
          <span>Status :</span>
          <select id="status" class="status-select">
            <option value="Pending" {% if laporan.status == 'Pending' %}selected{% endif %}>Pending</option>
            <option value="Verifikasi" {% if laporan.status == 'Verifikasi' %}selected{% endif %}>Verifikasi</option>
            <option value="Selesai" {% if laporan.status == 'Selesai' %}selected{% endif %}>Selesai</option>
          </select>
        </div>
      </div>

      <!-- BUTTON -->
      <div class="button-group">
        <button id="btnKembali" class="btn btn-secondary">Kembali</button>

        <!-- TOMBOL KLAIM BARANG -->
        <button id="btnKlaim" 
          class="btn btn-warning"
          data-kode="{{ laporan.kode_barang }}">
          Klaim Barang
        </button>

        <button id="btnUpdate" 
          class="btn btn-primary" 
          data-kode="{{ laporan.kode_barang }}">
          Update Status
        </button>
      </div>

    </div>
  </div>
</div>

<script src="{{ url_for('admin_bp.static', filename='js/detail_penemuan.js') }}"></script>
<script src="{{ url_for('admin_bp.static', filename='js/logout.js') }}"></script>

</body>
</html>
